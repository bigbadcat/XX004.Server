
登陆流程：
客户端已经知道UserID和服务器地址(正式运营时，通过平台SDK获取，账号登陆过程也是SDK负责)
UserID为String类型
RoleID为Int64类型

--User登陆流程
1、客户端通过服务器地址连接网关，建立连接。
2、客户端发送登陆请求，附带UserID
3、网关将UserID与连接关联，并转发给请求登陆服，附带UserID
4、登陆服向数据库请求数据查询
5、数据库回复结果
6、若User不存在则创建，再次向数据库请求保存，保存结果返回后继续(异步)
7、登陆服将User信息发送网关
8、网关将结果转发给客户端
9、客户端根据User状态判断是否断开连接或者进入选角界面
10、根据玩家操作进入不同流程

--创建角色流程
1、客户端发送创建请求给登陆服，附带UserID和创建需要的信息(职业、名称等)
2、若创建信息合法，则创建角色，并向数据库请求保存，保存结果返回后继续(异步)
3、登陆服将结果发给网关，包含了RoleID(如果创建成功)
4、网关回复客户端
5、客户端收到回复后，自动选择创建的角色进入游戏(走选择角色流程)


--选择角色流程(进入失败由登陆服回复，进入成功由世界服通知)
1、客户端发送进入游戏请求，附带RoleID
2、网关将RoleID与连接关联，并发给登陆服，附带UserID和RoleID
3、如果角色不可进入，回复客户端 -> end
4、如果进入成功，登陆服通知世界服角色上线，附带UserID和RoleID
5、世界服处理完上线逻辑后，通知网关角色进入游戏成功，附带UserID、RoleID
6、网关生成重连Token(包含UserID、RoleID、TimeStamp)，并转发通知给客户端
7、世界服继续发送EnterGame需要的信息，最后是进入场景(做完第五步后就可以继续发送了，数据包顺序能得到保证)
8、客户端进入游戏


退出流程：
退出分为玩家主动退出和掉线退出两种

--主动退出流程(角色成功进入之后)
1、客户端发送退出请求给网关
2、网关直接回复客户端退出成功，并将连接关联的UserID和RoleID清除，删除重连Token
3、客户端收到回复后断开连接，退出程序
4、网关通知世界服玩家退出，附带UserID和RoleID

--掉线退出流程
1、网关检测到连接断开
2、网关清除连接，若连接已经关联了RoleID，则将UserID、RoleID和TimeStamp保存
3、网关定时判断TimeStamp是否超过了一定时间，如果超出则通知世界服玩家退出，附带UserID和RoleID



断线重连：
1、进入游戏成功后，客户端会得到服务器下发的重连Token，并记录了当前服务器地址
2、连接断开后，客户端提示连接已断开，并自动尝试进行N次连接
3、尝试连接期间屏蔽任何操作，并实时显示尝试次数
4、若尝试N次后无法连接，则提示界面提供操作"再次尝试"(回到3步骤) "返回登陆"(回到登陆场景 -> end)
5、若连接成功后，则发送Token进行重连
6、网关解析Token，解析失败或已经过期则返回客户端重连失败，否则返回成功并通知世界服务刷新玩家数据
7、客户端收到重连结果。若为失败：提示界面只提供"返回登陆"操作(回到登陆场景 -> end)，若成功则提示正在刷新数据
8、客户端刷新数据处理
9、客户端收到刷新数据完毕的回复后关掉提示










